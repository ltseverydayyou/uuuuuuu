if game.GameId == 5120885191 then

local input = game:GetService("UserInputService")
local vim = game:GetService("VirtualInputManager")
local p = game:GetService("Players").LocalPlayer
local gui = p:FindFirstChild("PlayerGui")
local rs = game:GetService("RunService")

local RunService = rs
local BallFolder = workspace:WaitForChild("Balls")
local player = p
local canParry = true

getgenv().ballzui = true
getgenv().visualizer = true

function getRoot(char)
	local rootPart = char:FindFirstChild('HumanoidRootPart') or char:FindFirstChild('Torso') or char:FindFirstChild('UpperTorso')
	return rootPart
end

--[[if p.UserId ~= 156256804 then
loadstring(game:HttpGet("https://raw.githubusercontent.com/1f0yt/community/main/RedCircleBlock"))()
else
loadstring(game:HttpGet("https://raw.githubusercontent.com/FFJ1/Roblox-Exploits/main/scripts/Loader.lua"))()
end]]



---

local function calculatePredictionTime(ball, player)
    local character = player.Character
    if character then
        local rootPart = character:FindFirstChild("HumanoidRootPart")
        if rootPart then
            local relativePosition = ball.Position - rootPart.Position
            local relativeVelocity = ball.Velocity - rootPart.Velocity
            local a = ball.Size.Magnitude / 1
            local b = relativePosition.Magnitude
            local c = math.sqrt(a * a + b * b)
            return (c - a) / relativeVelocity.Magnitude
        end
    end
    return math.huge
end

local function parry()
    if canParry then
        canParry = false
        if firesignal then
firesignal(gui.HUD.MobileLarge.Block.Detection.MouseButton1Down)
else
vim:SendKeyEvent(true, "F", 0, game)
vim:SendKeyEvent(false, "F", 0, game)
end
        task.delay(.05, function()
            canParry = true
        end)
    end
end

local function checkProximityToPlayer(ball, player)
    local predictionTime = calculatePredictionTime(ball, player)
    if predictionTime then
        local ballSpeedThreshold = math.max(0.4, 0.6 - ball.Velocity.Magnitude * 0.03)
        if predictionTime <= ballSpeedThreshold and ball:FindFirstChildOfClass("Highlight") then
            parry()
        end
    end
end

local function checkBallsProximity()
    if player and player.Character then
        for _, ball in ipairs(BallFolder:GetChildren()) do
            if ball:IsA("BasePart") then
                checkProximityToPlayer(ball, player)
            end
        end
    end
end

RunService.Heartbeat:Connect(checkBallsProximity)

---


game.Workspace.Effects.ChildAdded:Connect(function(j)
wait();
j:Destroy()
end)
task.wait(.5);
local screenGui = Instance.new("ScreenGui")
screenGui.IgnoreGuiInset = true
screenGui.Parent = (game:GetService("CoreGui") or game:GetService("Players").LocalPlayer:FindFirstChild("PlayerGui"))
screenGui.ResetOnSpawn = false
screenGui.Name = math.random(1,69420)

local listLayout = Instance.new("UIListLayout")
listLayout.SortOrder = Enum.SortOrder.LayoutOrder
listLayout.Parent = screenGui
listLayout.FillDirection = Enum.FillDirection.Horizontal
listLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
listLayout.VerticalAlignment = Enum.VerticalAlignment.Bottom

local function createButton(name, text, order)
    local button = Instance.new("TextButton")
    button.Name = (name or "name")
    button.Text = (text or "nothing")
    button.TextScaled=true
    button.ZIndex=69
    button.Size = UDim2.new(0, 70, 0, 45)
    button.LayoutOrder = (order or 0)
    button.Parent = screenGui
    return button
end

local spamButton = createButton("spem", "Spam", 0)
local gay = createButton("fr", "Freeze", 1)
local bruh = createButton("unfr", "Unfreeze", 2)
local parryButton = createButton("par", "Parry", 3)

parryButton.MouseButton1Down:Connect(function()
if firesignal then
firesignal(gui.HUD.MobileLarge.Block.Detection.MouseButton1Down)
else
vim:SendKeyEvent(true, "F", 0, game)
vim:SendKeyEvent(false, "F", 0, game)
end
end)

gay.MouseButton1Click:Connect(function()
getRoot(p.Character).Anchored=true
end)


bruh.MouseButton1Click:Connect(function()
getRoot(p.Character).Anchored=false
end)


local spem = false

spamButton.MouseButton1Down:Connect(function()
spem = not spem
if spem then
spamButton.Text = "Stop"
else
spamButton.Text = "Spam"
end
end)

function ballz(bell)
wait();
for _, v in ipairs(bell:GetDescendants()) do
if v:IsA("ParticleEmitter") then
wait();
v:Destroy()
end
end
bell.Transparency=0
local balls1 = game.ReplicatedStorage.Storage.Balls
if bell.Color == balls1.Ball1.Color then
local highlight = Instance.new("SelectionBox")
highlight.Color3 = bell.Color
highlight.Adornee = bell
highlight.Parent = bell
highlight.Name = "ball1"
game.StarterGui:SetCore("SendNotification", {
Title = "Ball Spawned";
Text = "Ball Name: " ..bell.Name;
Icon = "";
Duration = 0.7;
Callback = NotificationBindable;
})
elseif bell.Color == balls1.UltimateBall1.Color then
bell.Parent=game.workspace
local highlight = Instance.new("SelectionBox")
highlight.Color3 = bell.Color
highlight.Adornee = bell
highlight.Parent = bell
highlight.Name = "ultimateball1"
game.StarterGui:SetCore("SendNotification", {
Title = "Ultimate Ball Spawned";
Text = "Ultimate Ball Name: " ..bell.Name;
Icon = "";
Duration = 1.5;
Callback = NotificationBindable;
})
end
end

workspace.Balls.ChildAdded:Connect(ballz)

rs.RenderStepped:connect(function()
pcall(function()
local ui = p.PlayerGui.HUD
if input.TouchEnabled then
ui.MobileLarge.Visible = true
ui.MobileSmall.Visible = false
ui.Actions.Visible = false
ui.MobileLarge.Block.Visible = false
else
ui.MobileLarge.Visible = false
ui.MobileSmall.Visible = false
ui.Actions.Visible = true
end
end)
end)

rs.RenderStepped:connect(function()
if spem then
if firesignal then
firesignal(gui.HUD.MobileLarge.Block.Detection.MouseButton1Down)
else
vim:SendKeyEvent(true, "F", 0, game)
vim:SendKeyEvent(false, "F", 0, game)
end
end
end)

end
