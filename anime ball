if game.GameId == 5120885191 then
	local function ClonedService(name)
		local Service = game.GetService
		local Reference = cloneref or function(reference)
			return reference
		end
		return Reference(Service(game, name))
	end

	local UIS = ClonedService("UserInputService")
	local plrs = ClonedService("Players")
	local plr = plrs.LocalPlayer
	local rs = ClonedService("RunService")
	local rep = ClonedService("ReplicatedStorage")
	local TweenService = ClonedService("TweenService")
	local wk = ClonedService("Workspace")

	local spam = false
	spamBtn = nil
	local spamModeBtn
	local spamMode = "Fast"
	local spamSpeeds = { "Fast", "Extreme" }
	local spamIndex = 1

	local G = getgenv and getgenv() or _G
	G.visualizer = G.visualizer ~= nil and G.visualizer or false

	local antiKb = false
	local antiKbBtn
	local antiKbConn

	local abpUrl = "https://raw.githubusercontent.com/ltseverydayyou/uuuuuuu/main/AnimeBallParry.lua"

	local function protectUI(sGui)
		if sGui:IsA("ScreenGui") then
			sGui.ZIndexBehavior = Enum.ZIndexBehavior.Global
			sGui.DisplayOrder = 999999999
			sGui.ResetOnSpawn = false
			sGui.IgnoreGuiInset = true
		end

		local cGUI = ClonedService("CoreGui")
		local lPlr = plrs.LocalPlayer

		local function NAProtection(inst, var)
			if inst then
				if var then
					inst[var] = "\000"
					inst.Archivable = false
				else
					inst.Name = "\000"
					inst.Archivable = false
				end
			end
		end

		if gethui then
			NAProtection(sGui)
			sGui.Parent = gethui()
			return sGui
		elseif cGUI and cGUI:FindFirstChild("RobloxGui") then
			NAProtection(sGui)
			sGui.Parent = cGUI:FindFirstChild("RobloxGui")
			return sGui
		elseif cGUI then
			NAProtection(sGui)
			sGui.Parent = cGUI
			return sGui
		elseif lPlr and lPlr:FindFirstChildWhichIsA("PlayerGui") then
			NAProtection(sGui)
			sGui.Parent = lPlr:FindFirstChildWhichIsA("PlayerGui")
			sGui.ResetOnSpawn = false
			return sGui
		else
			return nil
		end
	end

	function getRoot(char)
		return char and (char:FindFirstChild("HumanoidRootPart") or char:FindFirstChild("Torso") or char:FindFirstChild("UpperTorso"))
	end

	function rndStr()
		local len = math.random(10, 20)
		local arr = {}
		for i = 1, len do
			arr[i] = string.char(math.random(32, 126))
		end
		return table.concat(arr)
	end

	function parry()
		rep.Framework.RemoteFunction:InvokeServer("SwordService", "Block", { -0.2588194012641907 })
	end

	local function queueParry()
		task.spawn(parry)
	end

	local function initVisCfg()
		local v = G.visualizer
		if type(v) ~= "table" then
			v = { enabled = v == true }
		end
		if v.enabled == nil then
			v.enabled = true
		end
		v.speedScale = v.speedScale or 0.06
		v.minSize = v.minSize or 5
		v.maxSize = v.maxSize or 200
		v.predictMaxSize = v.predictMaxSize or 400
		v.predictMinRadius = v.predictMinRadius or 10
		v.pingPredictScale = v.pingPredictScale or 0.1
		v.pingTimeScale = v.pingTimeScale or 0.001
		v.transparency = v.transparency or 0.3
		v.pinkTransparency = v.pinkTransparency or 0.55
		v.distanceDivisor = v.distanceDivisor or 10
		v.predictBase = v.predictBase or 35
		v.predictExtra = v.predictExtra or 5
		v.profile = v.profile or "Balanced"
		G.visualizer = v
		return v
	end

	initVisCfg()

	local function isVelocityInstance(inst)
		if not inst then
			return false
		end
		if inst:IsA("BodyVelocity") or inst:IsA("BodyAngularVelocity") or inst:IsA("LinearVelocity") or inst:IsA("AngularVelocity") then
			return true
		end
		return string.find(inst.ClassName, "Velocity") ~= nil
	end

	local function disconnectAntiKb()
		if antiKbConn then
			antiKbConn:Disconnect()
			antiKbConn = nil
		end
	end

	local function attachAntiKb(char)
		disconnectAntiKb()
		if not (antiKb and char) then
			return
		end
		for _, desc in ipairs(char:GetDescendants()) do
			if isVelocityInstance(desc) then
				desc:Destroy()
			end
		end
		antiKbConn = char.DescendantAdded:Connect(function(desc)
			task.defer(function()
				if isVelocityInstance(desc) then
					desc:Destroy()
				end
			end)
		end)
	end

	wk.Effects.ChildAdded:Connect(function(j)
		task.defer(function()
			if j then
				j:Destroy()
			end
		end)
	end)

	task.wait(0.5)

	local gui = Instance.new("ScreenGui")
	gui.IgnoreGuiInset = true
	protectUI(gui)
	gui.ResetOnSpawn = false
	gui.Name = rndStr()

	local frame = Instance.new("Frame")
	frame.Name = "MainFrame"
	local fullSize = UDim2.new(0, 340, 0, 270)
	local miniSize = UDim2.new(0, 340, 0, 54)
	local fullPos = UDim2.new(0.5, -170, 0.5, -135)
	frame.Size = fullSize
	frame.Position = fullPos
	frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	frame.BackgroundTransparency = 0.1
	frame.BorderSizePixel = 0
	frame.Active = true
	frame.Draggable = true
	frame.Parent = gui
	frame.ClipsDescendants = true

	local corner = Instance.new("UICorner")
	corner.CornerRadius = UDim.new(0, 10)
	corner.Parent = frame

	local stroke = Instance.new("UIStroke")
	stroke.Thickness = 1.5
	stroke.Color = Color3.fromRGB(255, 255, 255)
	stroke.Transparency = 0.2
	stroke.Parent = frame

	local toggleBtn = Instance.new("TextButton")
	toggleBtn.Name = "ToggleButton"
	toggleBtn.Size = UDim2.new(0, 40, 0, 40)
	toggleBtn.Position = UDim2.new(0.5, -20, 0, 10)
	toggleBtn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	toggleBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
	toggleBtn.TextSize = 14
	toggleBtn.Font = Enum.Font.GothamBold
	toggleBtn.Text = "AB"
	toggleBtn.AutoButtonColor = false
	toggleBtn.Visible = false
	toggleBtn.Parent = gui

	local tCorner = Instance.new("UICorner")
	tCorner.CornerRadius = UDim.new(1, 0)
	tCorner.Parent = toggleBtn

	local tStroke = Instance.new("UIStroke")
	tStroke.Thickness = 1
	tStroke.Color = Color3.fromRGB(255, 255, 255)
	tStroke.Transparency = 0.25
	tStroke.Parent = toggleBtn

	local title = Instance.new("TextLabel")
	title.Name = "Title"
	title.Size = UDim2.new(1, -110, 0, 26)
	title.Position = UDim2.new(0, 14, 0, 6)
	title.BackgroundTransparency = 1
	title.TextColor3 = Color3.fromRGB(255, 255, 255)
	title.TextSize = 18
	title.Font = Enum.Font.GothamBold
	title.TextXAlignment = Enum.TextXAlignment.Left
	title.Text = "Anime Ball Parry"
	title.Parent = frame

	local deviceLbl = Instance.new("TextLabel")
	deviceLbl.Name = "Device"
	deviceLbl.Size = UDim2.new(0, 80, 0, 18)
	deviceLbl.Position = UDim2.new(0, 14, 0, 30)
	deviceLbl.BackgroundTransparency = 1
	deviceLbl.TextColor3 = Color3.fromRGB(200, 200, 200)
	deviceLbl.TextSize = 12
	deviceLbl.Font = Enum.Font.Gotham
	deviceLbl.TextXAlignment = Enum.TextXAlignment.Left
	deviceLbl.Text = UIS.TouchEnabled and "MOBILE" or "PC"
	deviceLbl.Parent = frame

	local closeBtn = Instance.new("TextButton")
	closeBtn.Name = "CloseBtn"
	closeBtn.Text = "X"
	closeBtn.Size = UDim2.new(0, 26, 0, 26)
	closeBtn.Position = UDim2.new(1, -32, 0, 6)
	closeBtn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	closeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
	closeBtn.TextSize = 16
	closeBtn.Font = Enum.Font.GothamBold
	closeBtn.AutoButtonColor = false
	closeBtn.Parent = frame

	local closeCorner = Instance.new("UICorner")
	closeCorner.CornerRadius = UDim.new(0, 6)
	closeCorner.Parent = closeBtn

	local minimizeBtn = Instance.new("TextButton")
	minimizeBtn.Name = "MinimizeBtn"
	minimizeBtn.Text = "-"
	minimizeBtn.Size = UDim2.new(0, 26, 0, 26)
	minimizeBtn.Position = UDim2.new(1, -64, 0, 6)
	minimizeBtn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	minimizeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
	minimizeBtn.TextSize = 16
	minimizeBtn.Font = Enum.Font.GothamBold
	minimizeBtn.AutoButtonColor = false
	minimizeBtn.Parent = frame

	local miniCorner = Instance.new("UICorner")
	miniCorner.CornerRadius = UDim.new(0, 6)
	miniCorner.Parent = minimizeBtn

	local statusLbl = Instance.new("TextLabel")
	statusLbl.Name = "Status"
	statusLbl.Size = UDim2.new(1, -28, 0, 18)
	statusLbl.Position = UDim2.new(0, 14, 1, -48)
	statusLbl.BackgroundTransparency = 1
	statusLbl.TextColor3 = Color3.fromRGB(220, 220, 220)
	statusLbl.TextSize = 12
	statusLbl.Font = Enum.Font.Gotham
	statusLbl.TextXAlignment = Enum.TextXAlignment.Left
	statusLbl.Parent = frame

	local hintLbl = Instance.new("TextLabel")
	hintLbl.Name = "Hint"
	hintLbl.Size = UDim2.new(1, -28, 0, 20)
	hintLbl.Position = UDim2.new(0, 14, 1, -26)
	hintLbl.BackgroundTransparency = 1
	hintLbl.TextColor3 = Color3.fromRGB(180, 180, 180)
	hintLbl.TextSize = 11
	hintLbl.Font = Enum.Font.Gotham
	hintLbl.TextXAlignment = Enum.TextXAlignment.Left
	hintLbl.TextWrapped = true
	hintLbl.Parent = frame

	local divider = Instance.new("Frame")
	divider.Size = UDim2.new(1, -28, 0, 1)
	divider.Position = UDim2.new(0, 14, 0, 54)
	divider.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	divider.BackgroundTransparency = 0.8
	divider.BorderSizePixel = 0
	divider.Parent = frame

	local section1 = Instance.new("TextLabel")
	section1.Name = "SecControls"
	section1.Size = UDim2.new(1, -28, 0, 16)
	section1.Position = UDim2.new(0, 14, 0, 58)
	section1.BackgroundTransparency = 1
	section1.TextColor3 = Color3.fromRGB(210, 210, 210)
	section1.TextSize = 11
	section1.Font = Enum.Font.Gotham
	section1.TextXAlignment = Enum.TextXAlignment.Left
	section1.Text = "Controls"
	section1.Parent = frame

	local function pulseBtn(btn)
		if not btn or not btn.Parent then
			return
		end
		local bg = btn.BackgroundColor3
		local tc = btn.TextColor3
		local tweenIn = TweenService:Create(btn, TweenInfo.new(0.06, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
			BackgroundColor3 = Color3.fromRGB(255, 255, 255),
			TextColor3 = Color3.fromRGB(0, 0, 0)
		})
		tweenIn:Play()
		task.delay(0.1, function()
			if btn and btn.Parent then
				TweenService:Create(btn, TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
					BackgroundColor3 = bg,
					TextColor3 = tc
				}):Play()
			end
		end)
	end

	local function setBtnState(btn, on)
		if not btn then
			return
		end
		if on then
			btn.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
			btn.TextColor3 = Color3.fromRGB(0, 0, 0)
		else
			btn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
			btn.TextColor3 = Color3.fromRGB(255, 255, 255)
		end
	end

	local function mkBtn(name, text, size, pos, callback, isSingle)
		local btn = Instance.new("TextButton")
		btn.Name = name
		btn.Text = text
		btn.Size = size
		btn.Position = pos
		btn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
		btn.BackgroundTransparency = 0
		btn.TextColor3 = Color3.fromRGB(255, 255, 255)
		btn.TextSize = 14
		btn.Font = Enum.Font.Gotham
		btn.BorderSizePixel = 0
		btn.AutoButtonColor = false
		btn.Parent = frame

		local bCorner = Instance.new("UICorner")
		bCorner.CornerRadius = UDim.new(0, 8)
		bCorner.Parent = btn

		local bStroke = Instance.new("UIStroke")
		bStroke.Thickness = 1
		bStroke.Color = Color3.fromRGB(255, 255, 255)
		bStroke.Transparency = 0.3
		bStroke.Parent = btn

		btn.MouseButton1Click:Connect(function(...)
			if isSingle then
				pulseBtn(btn)
			end
			task.defer(callback, btn, ...)
		end)

		return btn
	end

	local function updateStatus()
		local dev = UIS.TouchEnabled and "MOBILE" or "PC"
		statusLbl.Text = "Spam: " .. (spam and "ON" or "OFF") .. "   Speed: " .. spamMode .. "   Anti KB: " .. (antiKb and "ON" or "OFF") .. "   Device: " .. dev
		if UIS.TouchEnabled then
			hintLbl.Text = "Tap buttons to toggle spam, speed, anti knockback and freeze."
		else
			hintLbl.Text = "Press R to toggle spam. Use buttons for speed, anti knockback and freeze."
		end
	end

	local function tween(obj, t, goal)
		local tw = TweenService:Create(obj, TweenInfo.new(t, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), goal)
		tw:Play()
		return tw
	end

	local function applySpamMode(name)
		if name ~= "Fast" and name ~= "Extreme" then
			name = "Fast"
		end
		spamMode = name
		if spamModeBtn then
			spamModeBtn.Text = "Speed: " .. name
		end
		updateStatus()
	end

	local function cycleSpamMode()
		spamIndex = spamIndex + 1
		if spamIndex > #spamSpeeds then
			spamIndex = 1
		end
		applySpamMode(spamSpeeds[spamIndex])
	end

	local function toggleSpam()
		spam = not spam
		if spamBtn then
			spamBtn.Text = "Spam: " .. (spam and "ON" or "OFF")
			setBtnState(spamBtn, spam)
		end
		updateStatus()
	end

	local function setAntiKb(state)
		antiKb = state
		if antiKbBtn then
			antiKbBtn.Text = "Anti Knockback: " .. (antiKb and "ON" or "OFF")
			setBtnState(antiKbBtn, antiKb)
		end
		if antiKb then
			attachAntiKb(plr.Character)
		else
			disconnectAntiKb()
		end
		updateStatus()
	end

	local function toggleAntiKb()
		setAntiKb(not antiKb)
	end

	local parryBtn = mkBtn("ParryBtn", "Manual Parry", UDim2.new(0, 100, 0, 34), UDim2.new(0, 14, 0, 78), function()
		parry()
	end, true)

	spamBtn = mkBtn("SpamBtn", "Spam: OFF", UDim2.new(0, 100, 0, 34), UDim2.new(0, 122, 0, 78), function()
		toggleSpam()
	end, false)

	spamModeBtn = mkBtn("SpamModeBtn", "Speed: " .. spamMode, UDim2.new(0, 100, 0, 34), UDim2.new(0, 230, 0, 78), function()
		cycleSpamMode()
	end, false)

	applySpamMode("Fast")

	local freezeBtn = mkBtn("FreezeBtn", "Freeze", UDim2.new(0, 150, 0, 34), UDim2.new(0, 14, 0, 118), function()
		local r = getRoot(plr.Character)
		if r then
			r.Anchored = true
		end
	end, true)

	local unfreezeBtn = mkBtn("UnfreezeBtn", "Unfreeze", UDim2.new(0, 150, 0, 34), UDim2.new(0, 176, 0, 118), function()
		local r = getRoot(plr.Character)
		if r then
			r.Anchored = false
		end
	end, true)

	antiKbBtn = mkBtn("AntiKnockbackBtn", "Anti Knockback: OFF", UDim2.new(1, -28, 0, 34), UDim2.new(0, 14, 0, 158), function()
		toggleAntiKb()
	end, false)

	setBtnState(spamBtn, false)
	setAntiKb(antiKb)
	updateStatus()

	local minimized = false

	minimizeBtn.MouseButton1Click:Connect(function()
		minimized = not minimized
		if minimized then
			tween(frame, 0.22, { Size = miniSize })
		else
			tween(frame, 0.22, { Size = fullSize })
		end
		task.defer(function()
			for _, v in ipairs(frame:GetChildren()) do
				if v:IsA("GuiObject") and v ~= title and v ~= closeBtn and v ~= minimizeBtn and v ~= deviceLbl then
					v.Visible = not minimized
				end
			end
		end)
	end)

	local function setFrameVisible(state)
		if state then
			task.defer(function()
				toggleBtn.Visible = false
				frame.Visible = true
				frame.Position = fullPos
				frame.Size = UDim2.new(0, 0, 0, 0)
				frame.BackgroundTransparency = 1
				local targetSize = minimized and miniSize or fullSize
				tween(frame, 0.25, { Size = targetSize, BackgroundTransparency = 0.1 })
			end)
		else
			task.defer(function()
				local tw = tween(frame, 0.2, { Size = UDim2.new(0, 0, 0, 0), BackgroundTransparency = 1 })
				tw.Completed:Connect(function()
					frame.Visible = false
					toggleBtn.Visible = true
				end)
			end)
		end
	end

	closeBtn.MouseButton1Click:Connect(function()
		setFrameVisible(false)
	end)

	toggleBtn.MouseButton1Click:Connect(function()
		setFrameVisible(true)
	end)

	plr.CharacterAdded:Connect(function(char)
		if antiKb then
			attachAntiKb(char)
		end
	end)

	plr.CharacterRemoving:Connect(function()
		disconnectAntiKb()
	end)

	frame.Size = UDim2.new(0, 0, 0, 0)
	frame.Position = fullPos
	frame.BackgroundTransparency = 1
	tween(frame, 0.28, { Size = fullSize, BackgroundTransparency = 0.1 })

	task.defer(function()
		local ok, res = pcall(game.HttpGet, game, abpUrl)
		if ok and type(res) == "string" then
			local ok2, fn = pcall(loadstring, res)
			if ok2 and type(fn) == "function" then
				pcall(fn)
			end
		end
	end)

	UIS.InputBegan:Connect(function(input, gp)
		if not gp and input.KeyCode == Enum.KeyCode.R and (not UIS.TouchEnabled) then
			task.defer(toggleSpam)
		end
	end)

	function handleBall(ball)
		if not ball or not ball.Parent then
			return
		end
		for _, v in ipairs(ball:GetDescendants()) do
			if v:IsA("ParticleEmitter") or v:IsA("Beam") or v:IsA("Trail") or v:IsA("Attachment") then
				v:Destroy()
			end
		end
		if ball:IsA("BasePart") then
			ball.Transparency = 0
		end
		local ballsFolder = rep.Storage and rep.Storage:FindFirstChild("Balls")
		local highlight = Instance.new("SelectionBox")
		highlight.Adornee = ball
		highlight.Parent = ball
		if ballsFolder and ball:IsA("BasePart") then
			local ball1 = ballsFolder:FindFirstChild("Ball1")
			local uBall1 = ballsFolder:FindFirstChild("UltimateBall1")
			if ball1 and ball.Color == ball1.Color then
				highlight.Color3 = Color3.fromRGB(255, 255, 255)
				highlight.Name = "ball1"
				ClonedService("StarterGui"):SetCore("SendNotification", {
					Title = "Ball Spawned",
					Text = ball.Name,
					Duration = 0.64
				})
			elseif uBall1 and ball.Color == uBall1.Color then
				ball.Parent = wk
				highlight.Color3 = Color3.fromRGB(255, 255, 255)
				highlight.Name = "ultimateball1"
				ClonedService("StarterGui"):SetCore("SendNotification", {
					Title = "Ultimate Ball Spawned",
					Text = ball.Name,
					Duration = 1
				})
			end
		end
	end

	wk.Balls.ChildAdded:Connect(function(ball)
		task.defer(handleBall, ball)
	end)

	rs.RenderStepped:Connect(function()
		task.defer(function()
			pcall(function()
				local ui = plr:FindFirstChildWhichIsA("PlayerGui"):FindFirstChild("HUD")
				local large = ui and ui:FindFirstChild("MobileLarge")
				local small = ui and ui:FindFirstChild("MobileSmall")
				local actions = ui and ui:FindFirstChild("Actions")
				local bleck = large and large:FindFirstChild("Block")
				if large then large.Visible = UIS.TouchEnabled end
				if small then small.Visible = false end
				if actions then actions.Visible = not UIS.TouchEnabled end
				if bleck then bleck.Size=UDim2.new(0,45,0,45) end
			end)
		end)
	end)

	rs.RenderStepped:Connect(function()
		task.defer(function()
			if spam then
				if spamMode == "Extreme" then
					task.defer(queueParry)
					task.defer(queueParry)
					task.defer(queueParry)
				else
					task.defer(queueParry)
				end
			end
			updateStatus()
		end)
	end)
end
